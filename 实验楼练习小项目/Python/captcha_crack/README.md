# 实验名称：Python破解验证码

## 实验目的
体验利用Python工具集实现基本向量空间搜索引擎理论下的简单验证码图片内数字的读取。

## 实验工具
1. Python
1. 工具包：PIL.Image, math, os, string, hashlib, time

## 实验原理
首先针对一个验证码图片进行像素颜色统计检测，并人工验证哪些颜色组成了验证码的数字。  
利用上一步得到的颜色，通过判断该颜色所在的横坐标，将验证码中每个数字所在的横坐标范围确定下来。  
利用实验楼提供的单数字图片与Pillow的Image.getdata()方法,得到每种数字或小写字母的有效像素的集合，作为“训练集”。  
最后，利用上两步得到的“验证码的数字坐标集”与“训练集”，在VectorCompare.relation()算法下，比较验证码每一位与训练集中每一个字符的数据，选最相似（相同坐标值相同的次数最多）的那个返回，这样就得到了验证码中数字的内容。
## 实验步骤
### 准备环境

1. Python版本：2.7.6
1. 通过apt安装开发包：python-dev libtiff5-dev libjpeg8-dev zlib1g-dev libfreetype6-dev liblcms2-dev libwebp-dev tcl8.6-dev tk8.6-dev python-tk
1. 通过pip安装Pillow

### 具体步骤
1. 将captcha.gif复制到开发目录下，用Pillow打开这个图片（Image.open()），并转换为8-bit彩色（Image.convert()），并观察哪些像素构成了数字的绝大部分（Image.histogram()）。
1. 新建一个图片，同样采用8bit彩色模式，默认全白色，将有数字的部分填涂为黑色。（Image的new(),getpixel(),putpixel()）
1. 利用黑色像素所在的横坐标的位置,设计算法得到每一位字符所在的横坐标范围。该范围可以利用起来对图片进行分割并保存（使用Image.crop()）。
1. 利用[基本向量空间搜索引擎](http://ondoc.logand.com/d/2697/pdf)论文，写出向量比较算法。
1. 将“训练集”中的字符图片的像素数据读入。
1. 利用向量比较算法，比较训练集与验证码每一位的相符程度，并保存结果。
1. 打印该结果，观察效果。

## 实验总结
实验通过理论联系算法，得到了一种较为容易理解的机器学习算法，可以用来体验较原始的机器学习算法的实质，并为Python读取无干扰无扭曲的验证码提供了一套方案。